<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Cache API Demo</title>
</head>

<body>
    <h3>Cache API Demo</h3>
    <button onclick="save()">1. Save to Cache</button>
    <button onclick="load()">2. Load (Offline)</button>
    <p id="status"></p>

    <img id="img" width="300" />

    <script>
        const url = 'https://images.dog.ceo/breeds/retriever-golden/n02099601_124.jpg';

        async function save() {
            // 1. Open a cache box named 'v1'
            const cache = await caches.open('v1');
            // 2. Fetch image from net & put in box
            await cache.add(url);
            document.getElementById('status').innerText = 'Saved! Disconnect internet & click Load.';
        }

        async function load() {
            const cache = await caches.open('v1');
            // 3. Look for image in the box
            const res = await cache.match(url);

            if (res) {
                const blob = await res.blob();
                document.getElementById('img').src = URL.createObjectURL(blob);
                document.getElementById('status').innerText = 'Success! Image loaded from Cache.';
            } else {
                document.getElementById('status').innerText = 'Not found in cache.';
            }
        }
    </script>
</body>

</html>